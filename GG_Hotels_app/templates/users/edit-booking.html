{% extends 'base.html' %}

{% block title %}Edit Booking{% endblock %}

{% block content %}
<div class="edit-booking-page">
    <h2>Edit Booking</h2>
    
    <div class="booking-edit-container">
        <div class="current-booking-info">
            <h3>Current Booking Details</h3>
            <p><strong>Room:</strong> {{ booking.room_id.room_type }} - {{ booking.room_id.hotel_id.first_name }} Hotel</p>
            <p><strong>Price per night:</strong> ${{ booking.room_id.price_per_night }}</p>
            <p><strong>Current total:</strong> ${{ booking.total_price }}</p>
        </div>
        
        <div class="edit-form-section">
            <h3>Update Booking</h3>
            
            {% if messages %}
                {% for message in messages %}
                    <div class="message message-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            <form method="post" id="edit-booking-form">
                {% csrf_token %}
                
                <div class="date-input">
                    <label for="{{ form.check_in_date.id_for_label }}">{{ form.check_in_date.label }}</label>
                    {{ form.check_in_date }}
                    {% if form.check_in_date.help_text %}
                        <div class="help-text">{{ form.check_in_date.help_text }}</div>
                    {% endif %}
                    {% if form.check_in_date.errors %}
                        <div class="error-text">{{ form.check_in_date.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="date-input">
                    <label for="{{ form.check_out_date.id_for_label }}">{{ form.check_out_date.label }}</label>
                    {{ form.check_out_date }}
                    {% if form.check_out_date.help_text %}
                        <div class="help-text">{{ form.check_out_date.help_text }}</div>
                    {% endif %}
                    {% if form.check_out_date.errors %}
                        <div class="error-text">{{ form.check_out_date.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="services-section">
                    <label>Services</label>
                    {{ form.services }}
                    {% if form.services.help_text %}
                        <div class="help-text">{{ form.services.help_text }}</div>
                    {% endif %}
                    {% if form.services.errors %}
                        <div class="error-text">{{ form.services.errors }}</div>
                    {% endif %}
                </div>
                
                {% if form.non_field_errors %}
                    <div class="form-errors">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}
                
                <div class="form-actions">
                    <button type="submit" class="update-button">Update Booking</button>
                    <a href="{% url 'user_profile' %}" class="cancel-button">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}