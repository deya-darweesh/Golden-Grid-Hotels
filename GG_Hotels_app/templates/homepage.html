{% extends "base.html" %}

{% block title %}Homepage{% endblock title %} 
{% block head %}

{% endblock head %}

{% block content %}
<header>
    <nav>
        <div class="logoname">
            <h1> Golden Grid Hotels </h1>
        </div>

        <div class="navlinks">
            <a href="{% url "homepage" %}">Homepage</a>
            <a href="{% url "hotels_list" %}">Hotels</a>
            <a href="{% url "rooms_list" %}">All Rooms</a>
            <a href="About_us">About Us</a>
        </div>

        <div class="log_in_up">
            {% if user.is_authenticated %}
                <span>Welcome, {{ user.first_name|default:user.username }}!</span>
                <form id="logout-form" method="post" action="{% url 'logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit">Logout</button>
                </form>
            {% else %}
                <a href="{% url "sign_in" %}">User sign in</a>
                <a href="{% url "sign_up" %}">User sign up</a>
            {% endif %}
        </div>
    </nav>
    </header>

    <main>
        <section>
            <h2>Available Hotels</h2>
            {% for hotel in hotels %}
                <div>
                    <h3>{{ hotel.first_name }} {{ hotel.last_name }}</h3>
                    <p>Contact: {{ hotel.email }}</p>
                    <p>Username: {{ hotel.username }}</p>
                    <a href="{% url 'hotel_rooms_list' hotel.id %}">View Rooms</a>
                </div>
            {% empty %}
                <p>No hotels available</p>
            {% endfor %}
        </section>

        <section>
            <h2>Featured Rooms</h2>
            {% for room in featured_rooms %}
                <div>
                    <h3>{{ room.room_type }} Room - {{ room.hotel_id.first_name }} Hotel</h3>
                    <p><strong>Price per Night:</strong> ${{ room.price_per_night }}</p>
                    <p><strong>Capacity:</strong> {{ room.capacity }} person(s)</p>
                    {% if room.description %}
                        <p><strong>Description:</strong> {{ room.description }}</p>
                    {% endif %}
                    
                    {% if user.is_authenticated and not user.is_staff %}
                        <a href="{% url 'create_booking' room.id %}" class="btn btn-primary">Book This Room</a>
                    {% elif not user.is_authenticated %}
                        <a href="{% url 'sign_in' %}" class="btn btn-secondary">Sign In to Book</a>
                    {% elif user.is_staff %}
                        <span class="text-muted">Hotels cannot make bookings</span>
                    {% endif %}
                </div>
                <hr>
            {% empty %}
                <p>No rooms available</p>
            {% endfor %}
        </section>
    </main>

    <footer>
        <div>
            <nav>
                <a href="{% url "hotel_admin_panel" %}">Hotel Admin Panel</a>
                <a href="{% url "hotel_sign_in" %}">Hotel sign in</a> 
                <a href="{% url "hotel_sign_up" %}">Hotel sign up</a>
            </nav>
        </div>
        <div></div>
        <div></div>
        <div></div>
    </footer>
{% endblock content %}

